
$(document).ready(function(){if(typeof showProductPrice=="function"){$("#tabs_compare").on("click",".pagination-block .pagination a",function(a){a.preventDefault()})}window.myaction="page";$(window).on("popstate",function(b){var a=b.originalEvent.state;if(a&&(window.myaction=="page")){showProductPrice("",a.base_link,a.page,a.isNewProduct)}window.myaction="page"});$("#tabs_intro .main_news").html(my_news);setStateFirstLoad();clickTabDetail();rateStars();btnReply();activeTabs();viewRateTab();loadRateStars();loadCombos(1);showCommentRate();showBoxTabsTl();showMoreNews();show_news_detail();blockRelativeRightArr()});function show_news_detail(){var a=document.title;$(".block-news-cate").on("click","a.box-news",function(f){window.myaction="news";f.preventDefault();var g=$(this).attr("data-aid");var e=$(this).attr("data-mid");var c=$(this).attr("href");var d=$(this).attr("data-title");var b=location.origin+"/bai-viet/newsdetail?aid="+g+"&mid="+e;$.ajax({url:b,success:function(h){document.title=d;$("#lightbox-news").html(h);history.pushState({},"",c);$("body").addClass("overflow-hidden");$("#lightbox-news").removeClass("lightbox-hide")}})});$("#lightbox-news").on("click",".close-news-box",function(){$("#lightbox-news").addClass("lightbox-hide");$("body").removeClass("overflow-hidden");document.title=a;history.back()})}function submitPriceList(c,d,b,a){if(b!=undefined&&a!=undefined){$("#h_filter_price").val(b+a);$("#frm_PriceList").attr("action",c+"/1.html")}else{$("#frm_PriceList").attr("action",c+"/"+d+".html")}$("#frm_PriceList").submit()}function submitComment(c){var b=$("#"+c).children(".comment_name").val();var e=$("#"+c).children(".comment_data").val();var d=$("#h_modelid").val();var a=$("#"+c).children(".h_recordId").val();if(b==""){alert("Vui lòng nhập Họ Tên.");$("#"+c).children(".comment_name").focus();return false}if(e==""){alert("Vui lòng nhập thông tin bình luận.");$("#"+c).children(".comment_data").focus();return false}$("#ajax_loading").show();$.ajax({url:js_url+"comment",data:{name:b,comment_data:e,modelid:d,recordid:a},type:"POST",success:function(f){if(parseInt(f)=="1"){$("#comment_msg").html("Cám ơn bạn đã bình luận.");reloadComment();$("#"+c).children(".comment_name").val("");$("#"+c).children(".comment_data").val("");$("#model-tabs").ScrollTo();activetab("tabs_comment");var g;g=parseInt($("#comment_quantity").html())+1;$("#comment_quantity").html(g.toString());$("#comment_quantity2").html(g.toString());$("#ajax_loading").hide()}}})}function doLike(b,d){var a="",c;if($("#like_comment_"+d).attr("data-liked")=="yes"){return}if(b=="comment"){a=js_url+"like?type="+b+"&id="+d}$("#like_comment_"+d).attr("data-liked","yes");$.ajax({url:a,type:"GET",success:function(e){if(parseInt(e)==1){c=parseInt($("#like_comment_"+d).html())+1;$("#like_comment_"+d).html(c.toString())}}})}function reloadComment(){$.ajax({url:js_url+"commentlist",data:{modelid:$("#h_modelid").val()},type:"POST",success:function(a){$(".fb_cmt_buyer").html(a);btnReply()}})}function loadRateStars(){if(typeof ratingpoint==="undefined"){return}$("#h_ratingpoint").val(ratingpoint);for(var a=0;a<=ratingpoint-1;a++){$("#box_rating").addClass("hasrate");$("#box_rating").find(".star").eq(a).addClass("rated")}var b=ratingpoint-1;switch(b+1){case 1:text_rate="Xấu";break;case 2:text_rate="Tạm được";break;case 3:text_rate="Trung bình";break;case 4:text_rate="Tốt";break;case 5:text_rate="Tuyệt vời";break;default:text_rate="";break}$("#rating_txt").html(text_rate)}function rateStars(){$("#box_rating").find(".star").hover(function(){if($("#h_ratingpoint").val()==""){$("#box_rating").removeClass("hasrate");$("#box_rating").find(".star").removeClass("rated");var c=$(this).index();for(var b=0;b<=c;b++){$("#box_rating").find(".star").eq(b).addClass("rate")}var a="";switch(c+1){case 1:a="Xấu";break;case 2:a="Tạm được";break;case 3:a="Trung bình";break;case 4:a="Tốt";break;case 5:a="Tuyệt vời";break;default:a="";break}$("#rating_txt").html(a)}},function(){$(".box-rating .star").removeClass("rate")});$("#box_rating").find(".star").on("click",function(){if($("#h_ratingpoint").val()==""){var d=$(this).index();for(var c=0;c<=d;c++){$("#box_rating").addClass("hasrate");$("#box_rating").find(".star").eq(c).addClass("rated")}var a="";var b;switch(d+1){case 1:a="Xấu";b=1;break;case 2:a="Tạm được";b=2;break;case 3:a="Trung bình";b=3;break;case 4:a="Tốt";b=4;break;case 5:a="Tuyệt vời";b=5;break;default:a="";b=0;break}executeRating($("#h_modelid").val(),b);$("#rating_txt").html(a)}})}function executeRating(c,a){var b;$.ajax({url:js_url+"rating/"+$("#h_modelid").val()+"/"+a,success:function(d){if(d!="0"){$(".box-rate .stars").html(d);$("#h_ratingpoint").val(a)}}})}function clickTabDetail(){$("#model-tabs .ui-tabs-nav li").on("click",function(){var a=$("#model-tabs").offset().top;$("body").animate({scrollTop:a-20},200)})}function activetab(a){$("#tab_compare").removeClass("active");$("#tab_tech").removeClass("active");$("#tab_images").removeClass("active");$("#"+a).addClass("active");switch(a){case"tab_compare":$("#div_compare").show();$("#model-tabs .tabs-content-block").hide();break;case"tab_tech":$("#model-tabs .tabs-content-block").hide();$("#div_tech").show();break}}function btnReply(){$(".answer .btn-reply").on("click",function(){$(this).parent().parent().next(".box-in").slideToggle()})}function activeTabs(a){$("#model-tabs").on("click",".ui-state-default",function(b){b.preventDefault();var c=$(".ui-state-default").index(this);$(".ui-tabs .ui-tabs-nav li").removeClass("ui-tabs-active ui-state-active ui-state-focus");$(this).addClass("ui-tabs-active ui-state-active ui-state-focus");$("#model-tabs .tabs-content-block").removeClass("show");$(".ui-block-content .tabs-content-block").eq(c).addClass("show")})}function viewRateTab(){$(".view-rate-tab").on("click",function(a){a.preventDefault();$(".ui-tabs .ui-tabs-nav li").removeClass("ui-tabs-active ui-state-active ui-state-focus");$(".ui-tabs .ui-tabs-nav li.tabs_comment-pos").addClass("ui-tabs-active ui-state-active ui-state-focus");$("#model-tabs .tabs-content-block").removeClass("show");$("#tabs_comment").addClass("show");var b=$(".div-point-scroll").offset().top;$("html, body").animate({scrollTop:b-10},200)})}function loadCombos(a){$("#cbo_Province").change(function(d){var c="";var b=$("#cbo_Province").attr("data-link");if($("#check_new_tiem").is(":checked")){c="1"}showProductPrice("",b,1,c);d.preventDefault()});$("#check_new_tiem").click(function(c){var b=$("#check_new_tiem").attr("data-link");if(this.checked){showProductPrice("",b,1,this.checked)}else{showProductPrice("",b,1)}})}function setStateFirstLoad(){var a={page:getPageFromUrl(),base_link:$("#cbo_Province").attr("data-link"),isNewProduct:"",action:"page"};history.replaceState(a,location.href)}function getPageFromUrl(){var c=location.pathname;var b=c.split("/");var a="";a=b[b.length-1].split(".")[0];return a}function showProductPrice(c,j,e,k){$("#ajax_loading").show();var g="";if(k){g+="&is_newproduct=1"}var d="&base_link="+j;var f=$("#cbo_Province").val();var h=$("#h_modelid").val();var i=$("#check_new_tiem").attr("data-hasPrOld");var b=i.trim()?"&hasPrOld=1":"";var a=js_url+"productprice?mid="+h+"&p="+e+"&province="+f+g+d+b;$.ajax({url:a,success:function(n){$("#tabs_compare").html(n);loadCombos(e);$("#model-tabs").ScrollTo();if(c!==""){var l=$(c).attr("href");if(history.pushState){var m={page:e,base_link:j,isNewProduct:k,action:"page"};history.pushState(m,document.title,l)}}$("#ajax_loading").hide()}})}function showComment(c){var a=$("#cbo_Province").val();var d=$("#h_modelid").val();var b=js_url+"commentlist?mid="+d+"&p="+c;$.ajax({url:b,type:"POST",success:function(e){$(".fb_cmt_buyer").html(e);btnReply();$("#model-tabs").ScrollTo()}})}function showCommentRate(){jQuery(".comment-rate .tl").on("click",function(){jQuery(this).next(".box-cont").slideToggle(400)})}function owlNumberSlideshow(c){var b=$(c).children().length;if(b>1){$(c).owlCarousel({autoplay:true,nav:true,navText:['<svg class="icon icon-a_back"><use xlink:href="#icon-a_back"></use></svg>','<svg class="icon icon-a_next"><use xlink:href="#icon-a_next"></use></svg>'],loop:true,dots:true,items:1,lazyLoad:true,autoplayTimeout:3000,autoplayHoverPause:false,autoplaySpeed:300})}else{var a=$(c).find(".owl-lazy").attr("data-src");$(c).find(".owl-lazy").attr({src:a})}}function showMoreNews(){var i=$("#pagesizeart").val();var f=$("#h_modelid").val();var b=$("#totalnews").val();var c=$("#totalassessment").val();var h=$("#totaladvisory").val();var g=2;var e=2;var d=2;var a=location.pathname;$("#moreNews1").on("click",function(){var j=js_url+"viewmorenews?modelid="+f+"&p="+g+"&c=1&pathname="+a;$.ajax({url:j,type:"POST",success:function(k){$("#moreNews1_result").html($("#moreNews1_result").html()+k);if((i*g)>=b||k==""){$("#moreNews1").hide()}else{$("#moreNews1").html("Xem thêm("+(b-i*g)+")")}g++}})});$("#moreNews2").on("click",function(){var j=js_url+"viewmorenews?modelid="+f+"&p="+e+"&c=2&pathname="+a;$.ajax({url:j,type:"POST",success:function(k){$("#moreNews2_result").html($("#moreNews2_result").html()+k);if((i*e)>=c||k==""){$("#moreNews2").hide()}else{$("#moreNews2").html("Xem thêm("+(c-i*e)+")")}e++}})});$("#moreNews3").on("click",function(){var j=js_url+"viewmorenews?modelid="+f+"&p="+d+"&c=3&pathname="+a;$.ajax({url:j,type:"POST",success:function(k){$("#moreNews3_result").html($("#moreNews3_result").html()+k);if((i*d)>=h||k==""){$("#moreNews3").hide()}else{$("#moreNews3").html("Xem thêm("+(h-i*d)+")")}d++}})})}function showBoxTabsTl(){if($("#model-tabs").html()!=""){var a=$("#model-tabs").offset().top;$(window).on("scroll",function(){var b=$(window).scrollTop();if((a)<b){$("body").addClass("show-box-tabs-tl")}else{$("body").removeClass("show-box-tabs-tl")}})}}function blockRelativeRightArr(){var d=parseInt($(".block-relate-vertical .total-num").attr("data-total"));if(d<=5){$(".block-relate-vertical .arr-up").hide();$(".block-relate-vertical .arr-down").hide()}var c=1;var a=0;var b=-2;if(d%5==0){c=d/5}else{c=parseInt(d/5)+1}$(".block-relate-vertical .total-num").text(c);$(".block-relate-vertical").on("click",".arr-down",function(e){var g=parseInt($(".block-relate-vertical .cur-num").text());if(g<c){var f=g+1;$(".block-relate-vertical .cur-num").text(f);a=a-470;$(".block-relate-vertical .box-items-cont").css({transform:"translate3d(0px, "+a+"px, 0px)"})}});$(".block-relate-vertical").on("click",".arr-up",function(e){var g=parseInt($(".block-relate-vertical .cur-num").text());if(g>1){var f=g-1;$(".block-relate-vertical .cur-num").text(f);a=a+470;$(".block-relate-vertical .box-items-cont").css({transform:"translate3d(0px, "+a+"px, 0px)"})}})};